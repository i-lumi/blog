!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).SharedUtils={})}(this,function(e){"use strict";function n(e){console.error("[BScroll warn]: "+e)}var r="undefined"!=typeof window,i=r&&navigator.userAgent.toLowerCase(),t=!(!i||!/wechatdevtools/.test(i)),o=i&&0<i.indexOf("android"),s=function(){if("string"!=typeof i)return!1;var e=/os (\d\d?_\d(_\d)?)/.exec(i);if(!e)return!1;var t=e[1].split("_").map(function(e){return parseInt(e,10)});return!!(13<=t[0]&&4<=t[1])}();var f=function(e,t){for(var n in t)e[n]=t[n];return e};var a=r&&document.createElement("div").style,u=function(){if(!r)return!1;for(var e=0,t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];e<t.length;e++){var n=t[e];if(void 0!==a[n.value])return n.key}return!1}();function c(e){return!1===u?e:"standard"===u?"transitionEnd"===e?"transitionend":e:u+e.charAt(0).toUpperCase()+e.substr(1)}function p(e,t,n,r){e.addEventListener(t,n,{passive:!1,capture:!!r})}function v(e,t,n,r){e.removeEventListener(t,n,{capture:!!r})}var h=u&&"standard"!==u?"-"+u.toLowerCase()+"-":"",d=c("transform"),l=c("transition"),m=r&&c("perspective")in a,y=r&&("ontouchstart"in window||t),g=r&&l in a,w={transform:d,transition:l,transitionTimingFunction:c("transitionTimingFunction"),transitionDuration:c("transitionDuration"),transitionDelay:c("transitionDelay"),transformOrigin:c("transformOrigin"),transitionEnd:c("transitionEnd"),transitionProperty:c("transitionProperty")};function E(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1}var b=E;function T(e,t){var n;void 0===t&&(t="click"),"mouseup"===e.type?n=e:"touchend"!==e.type&&"touchcancel"!==e.type||(n=e.changedTouches[0]);var r,i={};n&&(i.screenX=n.screenX||0,i.screenY=n.screenY||0,i.clientX=n.clientX||0,i.clientY=n.clientY||0);var o=!0,s=!0;if("undefined"!=typeof MouseEvent)try{r=new MouseEvent(t,f({bubbles:o,cancelable:s},i))}catch(e){a()}else a();function a(){(r=document.createEvent("Event")).initEvent(t,o,s),f(r,i)}r.forwardedTouchEvent=!0,r._constructed=!0,e.target.dispatchEvent(r)}function O(e,t){t.parentNode.insertBefore(e,t)}function k(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}var C=r&&window;function D(){}function A(e){}var F=r?C.requestAnimationFrame||C.webkitRequestAnimationFrame||C.mozRequestAnimationFrame||C.oRequestAnimationFrame||function(e){return window.setTimeout(e,(e.interval||100/60)/2)}:D,M=r?C.cancelAnimationFrame||C.webkitCancelAnimationFrame||C.mozCancelAnimationFrame||C.oCancelAnimationFrame||function(e){window.clearTimeout(e)}:D,x={enumerable:!0,configurable:!0,get:A,set:A};var B=(R.prototype.on=function(e,t,n){return void 0===n&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},R.prototype.once=function(n,r,i){var o=this;void 0===i&&(i=this),this.hasType(n);var s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.off(n,s),r.apply(i,e)};return s.fn=r,this.on(n,s),this},R.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var r=n.length;r--;)(n[r][0]===t||n[r][0]&&n[r][0].fn===t)&&n.splice(r,1);return this}},R.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var r=this.events[e];if(r)for(var i,o=r.length,s=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(r),a=0;a<o;a++){var f=s[a],u=f[0],c=f[1];if(u&&!0===(i=u.apply(c,t)))return i}},R.prototype.registerType=function(e){var t=this;e.forEach(function(e){t.eventTypes[e]=e})},R.prototype.destroy=function(){this.events={},this.eventTypes={}},R.prototype.hasType=function(e){var t=this.eventTypes;t[e]===e||n('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+Object.keys(t).map(function(e){return JSON.stringify(e)})+"]")},R);function R(e){this.events={},this.eventTypes={},this.registerType(e)}var N=(S.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},S.prototype.addDOMEvents=function(){this.handleDOMEvents(p)},S.prototype.removeDOMEvents=function(){this.handleDOMEvents(v)},S.prototype.handleDOMEvents=function(t){var n=this,r=this.wrapper;this.events.forEach(function(e){t(r,e.name,n,!!e.capture)})},S.prototype.handleEvent=function(t){var n=t.type;this.events.some(function(e){return e.name===n&&(e.handler(t),!0)})},S);function S(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}e.EventEmitter=B,e.EventRegister=N,e.addClass=function(e,t){var n;k(e,t)||((n=e.className.split(" ")).push(t),e.className=n.join(" "))},e.addEvent=p,e.assert=function(e,t){if(!e)throw new Error("[BScroll] "+t)},e.before=O,e.between=function(e,t,n){return e<t?t:n<e?n:e},e.cancelAnimationFrame=M,e.click=T,e.cssVendor=h,e.dblclick=function(e){T(e,"dblclick")},e.ease={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(e){return 1+--e*e*e*e*e}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(e){return 1- --e*e*e*e}}},e.eventTypeMap={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2},e.extend=f,e.getDistance=function(e,t){return Math.sqrt(e*e+t*t)},e.getElement=function(e){return"string"==typeof e?document.querySelector(e):e},e.getNow=function(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date},e.getRect=function(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}},e.hasClass=k,e.hasPerspective=m,e.hasTouch=y,e.hasTransition=g,e.inBrowser=r,e.isAndroid=o,e.isIOSBadVersion=s,e.isUndef=function(e){return null==e},e.isWeChatDevTools=t,e.offset=function(e){for(var t=0,n=0;e;)t-=e.offsetLeft,n-=e.offsetTop,e=e.offsetParent;return{left:t,top:n}},e.offsetToBody=function(e){var t=e.getBoundingClientRect();return{left:-(t.left+window.pageXOffset),top:-(t.top+window.pageYOffset)}},e.prepend=function(e,t){var n=t.firstChild;n?O(e,n):t.appendChild(e)},e.preventDefaultExceptionFn=E,e.propertiesProxy=function(e,t,n){x.get=function(){return function(e,t){for(var n=t.split("."),r=0;r<n.length-1;r++)if("object"!=typeof(e=e[n[r]])||!e)return;var i=n.pop();return"function"==typeof e[i]?function(){return e[i].apply(e,arguments)}:e[i]}(this,t)},x.set=function(e){!function(e,t,n){for(var r,i=t.split("."),o=0;o<i.length-1;o++)e[r=i[o]]||(e[r]={}),e=e[r];e[i.pop()]=n}(this,t,e)},Object.defineProperty(e,n,x)},e.removeChild=function(e,t){e.removeChild(t)},e.removeClass=function(e,t){var n;k(e,t)&&(n=new RegExp("(^|\\s)"+t+"(\\s|$)","g"),e.className=e.className.replace(n," "))},e.removeEvent=v,e.requestAnimationFrame=F,e.style=w,e.tagExceptionFn=b,e.tap=function(e,t){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)},e.ua=i,e.warn=n,Object.defineProperty(e,"__esModule",{value:!0})});
